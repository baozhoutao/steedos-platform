WebApp.connectHandlers.use '/odata/v4/$metadata', (req, res, next) ->
	console.log "/odata/v4/$metadata"
	try
		data = '<?xml version="1.0" encoding="utf-8"?> <edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0"> <edmx:DataServices> <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="ODataDemo"> <EntityType Name="Product"> <Key> <PropertyRef Name="_id"/> </Key> <Property Name="_id" Type="Edm.String" Nullable="false"/> <Property Name="title" Type="Edm.String"/> </EntityType> <EntityContainer Name="DemoService"> <EntitySet Name="Products" EntityType="ODataDemo.Product"> </EntitySet> </EntityContainer> <Annotations Target="ODataDemo.DemoService"> <Annotation Term="Org.OData.Display.V1.Description" String="This is a sample OData service with vocabularies"/> </Annotations> <Annotations Target="ODataDemo.Product"> <Annotation Term="Org.OData.Display.V1.Description" String="All Products available in the online store"/> </Annotations> <Annotations Target="ODataDemo.Product/Name"> <Annotation Term="Org.OData.Display.V1.DisplayName" String="Product Name"/> </Annotations> </Schema> </edmx:DataServices> </edmx:Edmx>'


		res.setHeader('Content-type', 'application/xml;charset=utf-8');
		res.end(data)
	catch e
		console.error e.stack
		JsonRoutes.sendResult res,
			code: 200
			data: { errors: [{errorMessage: e.message}] }


WebApp.connectHandlers.use '/odata/v4/ppppp', (req, res, next) ->
	console.log "/odata/v4/ppppp"
	try
		data = {"@odata.context": "http://services.odata.org/V4/OData/OData.svc/$metadata#Products", "value": [ { "_id": "EsNs8svkxiSZ9qPyk", "archival_category_code": "WS", "aggregation_level": "文件", "title": "股份公司发文2018年投资计划", "author": "李明朗", "document_date": "2018-01-17T16:00:00.000Z", "security_classification": "公开", "produce_flag": "在档", "year": "2018", "document_aggregation": "单件", "document_status": "不归档", "language": "汉语", "orignal_document_creation_way": "原生", "agent_type": "部门", "space": "n9eLY4aFpnvGroHy6", "is_received": false, "is_destroyed": false, "is_borrowed": false, "created": "2018-01-24T06:06:37.983Z", "created_by": "5194c66ef4a563537a000003", "owner": "5194c66ef4a563537a000003", "category_code": "nA4rmCd7gCnRgJtLT", "retention_peroid": "keAjp89Q5Bac67W9d", "destroy_date": "2118-01-17T16:00:00.000Z" }, { "_id": "EsNs8svkxiSZ9qPyk222", "archival_category_code": "WS", "aggregation_level": "文件", "title": "股份公司发文", "author": "李明朗", "document_date": "2018-01-17T16:00:00.000Z", "security_classification": "公开", "produce_flag": "在档", "year": "2011", "document_aggregation": "单件", "document_status": "不归档", "language": "汉语", "orignal_document_creation_way": "原生", "agent_type": "部门", "space": "n9eLY4aFpnvGroHy6", "is_received": false, "is_destroyed": false, "is_borrowed": false, "created": "2018-01-24T06:06:37.983Z", "created_by": "5194c66ef4a563537a000003", "owner": "5194c66ef4a563537a000003", "category_code": "nA4rmCd7gCnRgJtLT", "retention_peroid": "keAjp89Q5Bac67W9d", "destroy_date": "2118-01-17T16:00:00.000Z" }, { "_id": "EsNs8svkxiS11Z9qPyk", "archival_category_code": "WS", "aggregation_level": "文件", "title": "股份公司发文zx2018年投资计划", "author": "李明朗", "document_date": "2018-01-17T16:00:00.000Z", "security_classification": "公开", "produce_flag": "在档", "year": "2012", "document_aggregation": "单件", "document_status": "不归档", "language": "汉语", "orignal_document_creation_way": "原生", "agent_type": "部门", "space": "n9eLY4aFpnvGroHy6", "is_received": false, "is_destroyed": false, "is_borrowed": false, "created": "2018-01-24T06:06:37.983Z", "created_by": "5194c66ef4a563537a000003", "owner": "5194c66ef4a563537a000003", "category_code": "nA4rmCd7gCnRgJtLT", "retention_peroid": "keAjp89Q5Bac67W9d", "destroy_date": "2118-01-17T16:00:00.000Z" }, { "_id": "EsNs212128svkxiSZ9qPyk", "archival_category_code": "WS", "aggregation_level": "文件", "title": "股份公司发文21212018年投资计划", "author": "李明朗", "document_date": "2018-01-17T16:00:00.000Z", "security_classification": "公开", "produce_flag": "在档", "year": "2013", "document_aggregation": "单件", "document_status": "不归档", "language": "汉语", "orignal_document_creation_way": "原生", "agent_type": "部门", "space": "n9eLY4aFpnvGroHy6", "is_received": false, "is_destroyed": false, "is_borrowed": false, "created": "2018-01-24T06:06:37.983Z", "created_by": "5194c66ef4a563537a000003", "owner": "5194c66ef4a563537a000003", "category_code": "nA4rmCd7gCnRgJtLT", "retention_peroid": "keAjp89Q5Bac67W9d", "destroy_date": "2118-01-17T16:00:00.000Z" }, { "_id": "EsN3456s8svkxiSZ9qP3456yk", "archival_category_code": "WS", "aggregation_level": "文件", "title": "股份公司sdvgazsdf资计划", "author": "李明朗", "document_date": "2018-01-17T16:00:00.000Z", "security_classification": "公开", "produce_flag": "在档", "year": "2014", "document_aggregation": "单件", "document_status": "不归档", "language": "汉语", "orignal_document_creation_way": "原生", "agent_type": "部门", "space": "n9eLY4aFpnvGroHy6", "is_received": false, "is_destroyed": false, "is_borrowed": false, "created": "2018-01-24T06:06:37.983Z", "created_by": "5194c66ef4a563537a000003", "owner": "5194c66ef4a563537a000003", "category_code": "nA4rmCd7gCnRgJtLT", "retention_peroid": "keAjp89Q5Bac67W9d", "destroy_date": "2118-01-17T16:00:00.000Z" }, { "_id": "EsN234asdfs8svkxiSZ9qPyk", "archival_category_code": "WS", "aggregation_level": "文件", "title": "股份公司asdfasdfzxcv资计划", "author": "李明朗", "document_date": "2018-01-17T16:00:00.000Z", "security_classification": "公开", "produce_flag": "在档", "year": "2015", "document_aggregation": "单件", "document_status": "不归档", "language": "汉语", "orignal_document_creation_way": "原生", "agent_type": "部门", "space": "n9eLY4aFpnvGroHy6", "is_received": false, "is_destroyed": false, "is_borrowed": false, "created": "2018-01-24T06:06:37.983Z", "created_by": "5194c66ef4a563537a000003", "owner": "5194c66ef4a563537a000003", "category_code": "nA4rmCd7gCnRgJtLT", "retention_peroid": "keAjp89Q5Bac67W9d", "destroy_date": "2118-01-17T16:00:00.000Z" }, { "_id": "E12121212sNs8svkxiSZ9qPyk", "archival_category_code": "WS", "aggregation_level": "文件", "title": "股份公司发bbbbbb资计划股份公司发bbbbbb资计划股份公司发bbbbbb资计划股份公司发bbbbbb资计划股份公司发bbbbbb资计划股份公司发bbbbbb资计划", "author": "李明朗", "document_date": "2018-01-17T16:00:00.000Z", "security_classification": "公开", "produce_flag": "在档", "year": "2016", "document_aggregation": "单件", "document_status": "不归档", "language": "汉语", "orignal_document_creation_way": "原生", "agent_type": "部门", "space": "n9eLY4aFpnvGroHy6", "is_received": false, "is_destroyed": false, "is_borrowed": false, "created": "2018-01-24T06:06:37.983Z", "created_by": "5194c66ef4a563537a000003", "owner": "5194c66ef4a563537a000003", "category_code": "nA4rmCd7gCnRgJtLT", "retention_peroid": "keAjp89Q5Bac67W9d", "destroy_date": "2118-01-17T16:00:00.000Z" } ], "@odata.count": 7 }


		res.setHeader('Content-type', 'application/json;odata.metadata=minimal');
		res.setHeader('OData-Version', '4.0')
		res.end(JSON.stringify(data))
	catch e
		console.error e.stack
		JsonRoutes.sendResult res,
			code: 200
			data: { errors: [{errorMessage: e.message}] }

WebApp.connectHandlers.use '/odata/v4/Products', (req, res, next) ->
	console.log "/odata/v4/Products"
	console.log req.headers
	try
		data = '<?xml version="1.0" encoding="utf-8"?><feed xml:base="http://services.odata.org/V4/OData/OData.svc/" xmlns="http://www.w3.org/2005/Atom" xmlns:d="http://docs.oasis-open.org/odata/ns/data" xmlns:m="http://docs.oasis-open.org/odata/ns/metadata" xmlns:georss="http://www.georss.org/georss" xmlns:gml="http://www.opengis.net/gml" m:context="http://services.odata.org/V4/OData/OData.svc/$metadata#Products"><id>http://services.odata.org/V4/OData/OData.svc/Products</id><title type="text">Products</title><updated>2018-02-02T09:41:22Z</updated><link rel="self" title="Products" href="Products" /><entry><id>http://services.odata.org/V4/OData/OData.svc/Products(0)</id><category term="#ODataDemo.Product" scheme="http://docs.oasis-open.org/odata/ns/scheme" /><link rel="edit" title="Product" href="Products(0)" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Categories" type="application/xml" title="Categories" href="Products(0)/Categories/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Categories" type="application/atom+xml;type=feed" title="Categories" href="Products(0)/Categories" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Supplier" type="application/xml" title="Supplier" href="Products(0)/Supplier/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Supplier" type="application/atom+xml;type=entry" title="Supplier" href="Products(0)/Supplier" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/ProductDetail" type="application/xml" title="ProductDetail" href="Products(0)/ProductDetail/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/ProductDetail" type="application/atom+xml;type=entry" title="ProductDetail" href="Products(0)/ProductDetail" /><title /><updated>2018-02-02T09:41:22Z</updated><author><name /></author><content type="application/xml"><m:properties><d:ID m:type="Int32">0</d:ID><d:Name>Bread</d:Name><d:Description>Whole grain bread</d:Description><d:ReleaseDate m:type="DateTimeOffset">1992-01-01T00:00:00Z</d:ReleaseDate><d:DiscontinuedDate m:null="true" /><d:Rating m:type="Int16">4</d:Rating><d:Price m:type="Double">2.5</d:Price></m:properties></content></entry><entry><id>http://services.odata.org/V4/OData/OData.svc/Products(1)</id><category term="#ODataDemo.Product" scheme="http://docs.oasis-open.org/odata/ns/scheme" /><link rel="edit" title="Product" href="Products(1)" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Categories" type="application/xml" title="Categories" href="Products(1)/Categories/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Categories" type="application/atom+xml;type=feed" title="Categories" href="Products(1)/Categories" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Supplier" type="application/xml" title="Supplier" href="Products(1)/Supplier/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Supplier" type="application/atom+xml;type=entry" title="Supplier" href="Products(1)/Supplier" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/ProductDetail" type="application/xml" title="ProductDetail" href="Products(1)/ProductDetail/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/ProductDetail" type="application/atom+xml;type=entry" title="ProductDetail" href="Products(1)/ProductDetail" /><title /><updated>2018-02-02T09:41:22Z</updated><author><name /></author><content type="application/xml"><m:properties><d:ID m:type="Int32">1</d:ID><d:Name>Milk</d:Name><d:Description>Low fat milk</d:Description><d:ReleaseDate m:type="DateTimeOffset">1995-10-01T00:00:00Z</d:ReleaseDate><d:DiscontinuedDate m:null="true" /><d:Rating m:type="Int16">3</d:Rating><d:Price m:type="Double">3.5</d:Price></m:properties></content></entry><entry><id>http://services.odata.org/V4/OData/OData.svc/Products(2)</id><category term="#ODataDemo.Product" scheme="http://docs.oasis-open.org/odata/ns/scheme" /><link rel="edit" title="Product" href="Products(2)" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Categories" type="application/xml" title="Categories" href="Products(2)/Categories/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Categories" type="application/atom+xml;type=feed" title="Categories" href="Products(2)/Categories" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Supplier" type="application/xml" title="Supplier" href="Products(2)/Supplier/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Supplier" type="application/atom+xml;type=entry" title="Supplier" href="Products(2)/Supplier" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/ProductDetail" type="application/xml" title="ProductDetail" href="Products(2)/ProductDetail/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/ProductDetail" type="application/atom+xml;type=entry" title="ProductDetail" href="Products(2)/ProductDetail" /><title /><updated>2018-02-02T09:41:22Z</updated><author><name /></author><content type="application/xml"><m:properties><d:ID m:type="Int32">2</d:ID><d:Name>Vint soda</d:Name><d:Description>Americana Variety - Mix of 6 flavors</d:Description><d:ReleaseDate m:type="DateTimeOffset">2000-10-01T00:00:00Z</d:ReleaseDate><d:DiscontinuedDate m:null="true" /><d:Rating m:type="Int16">3</d:Rating><d:Price m:type="Double">20.9</d:Price></m:properties></content></entry><entry><id>http://services.odata.org/V4/OData/OData.svc/Products(3)</id><category term="#ODataDemo.Product" scheme="http://docs.oasis-open.org/odata/ns/scheme" /><link rel="edit" title="Product" href="Products(3)" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Categories" type="application/xml" title="Categories" href="Products(3)/Categories/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Categories" type="application/atom+xml;type=feed" title="Categories" href="Products(3)/Categories" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Supplier" type="application/xml" title="Supplier" href="Products(3)/Supplier/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Supplier" type="application/atom+xml;type=entry" title="Supplier" href="Products(3)/Supplier" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/ProductDetail" type="application/xml" title="ProductDetail" href="Products(3)/ProductDetail/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/ProductDetail" type="application/atom+xml;type=entry" title="ProductDetail" href="Products(3)/ProductDetail" /><title /><updated>2018-02-02T09:41:22Z</updated><author><name /></author><content type="application/xml"><m:properties><d:ID m:type="Int32">3</d:ID><d:Name>Havina Cola</d:Name><d:Description>The Original Key Lime Cola</d:Description><d:ReleaseDate m:type="DateTimeOffset">2005-10-01T00:00:00Z</d:ReleaseDate><d:DiscontinuedDate m:type="DateTimeOffset">2006-10-01T00:00:00Z</d:DiscontinuedDate><d:Rating m:type="Int16">3</d:Rating><d:Price m:type="Double">19.9</d:Price></m:properties></content></entry><entry><id>http://services.odata.org/V4/OData/OData.svc/Products(4)</id><category term="#ODataDemo.Product" scheme="http://docs.oasis-open.org/odata/ns/scheme" /><link rel="edit" title="Product" href="Products(4)" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Categories" type="application/xml" title="Categories" href="Products(4)/Categories/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Categories" type="application/atom+xml;type=feed" title="Categories" href="Products(4)/Categories" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Supplier" type="application/xml" title="Supplier" href="Products(4)/Supplier/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Supplier" type="application/atom+xml;type=entry" title="Supplier" href="Products(4)/Supplier" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/ProductDetail" type="application/xml" title="ProductDetail" href="Products(4)/ProductDetail/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/ProductDetail" type="application/atom+xml;type=entry" title="ProductDetail" href="Products(4)/ProductDetail" /><title /><updated>2018-02-02T09:41:22Z</updated><author><name /></author><content type="application/xml"><m:properties><d:ID m:type="Int32">4</d:ID><d:Name>Fruit Punch</d:Name><d:Description>Mango flavor, 8.3 Ounce Cans (Pack of 24)</d:Description><d:ReleaseDate m:type="DateTimeOffset">2003-01-05T00:00:00Z</d:ReleaseDate><d:DiscontinuedDate m:null="true" /><d:Rating m:type="Int16">3</d:Rating><d:Price m:type="Double">22.99</d:Price></m:properties></content></entry><entry><id>http://services.odata.org/V4/OData/OData.svc/Products(5)</id><category term="#ODataDemo.Product" scheme="http://docs.oasis-open.org/odata/ns/scheme" /><link rel="edit" title="Product" href="Products(5)" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Categories" type="application/xml" title="Categories" href="Products(5)/Categories/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Categories" type="application/atom+xml;type=feed" title="Categories" href="Products(5)/Categories" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Supplier" type="application/xml" title="Supplier" href="Products(5)/Supplier/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Supplier" type="application/atom+xml;type=entry" title="Supplier" href="Products(5)/Supplier" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/ProductDetail" type="application/xml" title="ProductDetail" href="Products(5)/ProductDetail/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/ProductDetail" type="application/atom+xml;type=entry" title="ProductDetail" href="Products(5)/ProductDetail" /><title /><updated>2018-02-02T09:41:22Z</updated><author><name /></author><content type="application/xml"><m:properties><d:ID m:type="Int32">5</d:ID><d:Name>Cranberry Juice</d:Name><d:Description>16-Ounce Plastic Bottles (Pack of 12)</d:Description><d:ReleaseDate m:type="DateTimeOffset">2006-08-04T00:00:00Z</d:ReleaseDate><d:DiscontinuedDate m:null="true" /><d:Rating m:type="Int16">3</d:Rating><d:Price m:type="Double">22.8</d:Price></m:properties></content></entry><entry><id>http://services.odata.org/V4/OData/OData.svc/Products(6)</id><category term="#ODataDemo.Product" scheme="http://docs.oasis-open.org/odata/ns/scheme" /><link rel="edit" title="Product" href="Products(6)" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Categories" type="application/xml" title="Categories" href="Products(6)/Categories/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Categories" type="application/atom+xml;type=feed" title="Categories" href="Products(6)/Categories" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Supplier" type="application/xml" title="Supplier" href="Products(6)/Supplier/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Supplier" type="application/atom+xml;type=entry" title="Supplier" href="Products(6)/Supplier" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/ProductDetail" type="application/xml" title="ProductDetail" href="Products(6)/ProductDetail/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/ProductDetail" type="application/atom+xml;type=entry" title="ProductDetail" href="Products(6)/ProductDetail" /><title /><updated>2018-02-02T09:41:22Z</updated><author><name /></author><content type="application/xml"><m:properties><d:ID m:type="Int32">6</d:ID><d:Name>Pink Lemonade</d:Name><d:Description>36 Ounce Cans (Pack of 3)</d:Description><d:ReleaseDate m:type="DateTimeOffset">2006-11-05T00:00:00Z</d:ReleaseDate><d:DiscontinuedDate m:null="true" /><d:Rating m:type="Int16">3</d:Rating><d:Price m:type="Double">18.8</d:Price></m:properties></content></entry><entry><id>http://services.odata.org/V4/OData/OData.svc/Products(7)</id><category term="#ODataDemo.Product" scheme="http://docs.oasis-open.org/odata/ns/scheme" /><link rel="edit" title="Product" href="Products(7)" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Categories" type="application/xml" title="Categories" href="Products(7)/Categories/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Categories" type="application/atom+xml;type=feed" title="Categories" href="Products(7)/Categories" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Supplier" type="application/xml" title="Supplier" href="Products(7)/Supplier/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Supplier" type="application/atom+xml;type=entry" title="Supplier" href="Products(7)/Supplier" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/ProductDetail" type="application/xml" title="ProductDetail" href="Products(7)/ProductDetail/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/ProductDetail" type="application/atom+xml;type=entry" title="ProductDetail" href="Products(7)/ProductDetail" /><title /><updated>2018-02-02T09:41:22Z</updated><author><name /></author><content type="application/xml"><m:properties><d:ID m:type="Int32">7</d:ID><d:Name>DVD Player</d:Name><d:Description>1080P Upconversion DVD Player</d:Description><d:ReleaseDate m:type="DateTimeOffset">2006-11-15T00:00:00Z</d:ReleaseDate><d:DiscontinuedDate m:null="true" /><d:Rating m:type="Int16">5</d:Rating><d:Price m:type="Double">35.88</d:Price></m:properties></content></entry><entry><id>http://services.odata.org/V4/OData/OData.svc/Products(8)</id><category term="#ODataDemo.Product" scheme="http://docs.oasis-open.org/odata/ns/scheme" /><link rel="edit" title="Product" href="Products(8)" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Categories" type="application/xml" title="Categories" href="Products(8)/Categories/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Categories" type="application/atom+xml;type=feed" title="Categories" href="Products(8)/Categories" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Supplier" type="application/xml" title="Supplier" href="Products(8)/Supplier/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Supplier" type="application/atom+xml;type=entry" title="Supplier" href="Products(8)/Supplier" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/ProductDetail" type="application/xml" title="ProductDetail" href="Products(8)/ProductDetail/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/ProductDetail" type="application/atom+xml;type=entry" title="ProductDetail" href="Products(8)/ProductDetail" /><title /><updated>2018-02-02T09:41:22Z</updated><author><name /></author><content type="application/xml"><m:properties><d:ID m:type="Int32">8</d:ID><d:Name>LCD HDTV</d:Name><d:Description>42 inch 1080p LCD with Built-in Blu-ray Disc Player</d:Description><d:ReleaseDate m:type="DateTimeOffset">2008-05-08T00:00:00Z</d:ReleaseDate><d:DiscontinuedDate m:null="true" /><d:Rating m:type="Int16">3</d:Rating><d:Price m:type="Double">1088.8</d:Price></m:properties></content></entry><entry><id>http://services.odata.org/V4/OData/OData.svc/Products(9)</id><category term="#ODataDemo.FeaturedProduct" scheme="http://docs.oasis-open.org/odata/ns/scheme" /><link rel="edit" title="Product" href="Products(9)/ODataDemo.FeaturedProduct" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Categories" type="application/xml" title="Categories" href="Products(9)/ODataDemo.FeaturedProduct/Categories/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Categories" type="application/atom+xml;type=feed" title="Categories" href="Products(9)/ODataDemo.FeaturedProduct/Categories" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Supplier" type="application/xml" title="Supplier" href="Products(9)/ODataDemo.FeaturedProduct/Supplier/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Supplier" type="application/atom+xml;type=entry" title="Supplier" href="Products(9)/ODataDemo.FeaturedProduct/Supplier" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/ProductDetail" type="application/xml" title="ProductDetail" href="Products(9)/ODataDemo.FeaturedProduct/ProductDetail/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/ProductDetail" type="application/atom+xml;type=entry" title="ProductDetail" href="Products(9)/ODataDemo.FeaturedProduct/ProductDetail" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Advertisement" type="application/xml" title="Advertisement" href="Products(9)/ODataDemo.FeaturedProduct/Advertisement/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Advertisement" type="application/atom+xml;type=entry" title="Advertisement" href="Products(9)/ODataDemo.FeaturedProduct/Advertisement" /><title /><updated>2018-02-02T09:41:22Z</updated><author><name /></author><content type="application/xml"><m:properties><d:ID m:type="Int32">9</d:ID><d:Name>Lemonade</d:Name><d:Description>Classic, refreshing lemonade (Single bottle)</d:Description><d:ReleaseDate m:type="DateTimeOffset">1970-01-01T00:00:00Z</d:ReleaseDate><d:DiscontinuedDate m:null="true" /><d:Rating m:type="Int16">7</d:Rating><d:Price m:type="Double">1.01</d:Price></m:properties></content></entry><entry><id>http://services.odata.org/V4/OData/OData.svc/Products(10)</id><category term="#ODataDemo.FeaturedProduct" scheme="http://docs.oasis-open.org/odata/ns/scheme" /><link rel="edit" title="Product" href="Products(10)/ODataDemo.FeaturedProduct" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Categories" type="application/xml" title="Categories" href="Products(10)/ODataDemo.FeaturedProduct/Categories/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Categories" type="application/atom+xml;type=feed" title="Categories" href="Products(10)/ODataDemo.FeaturedProduct/Categories" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Supplier" type="application/xml" title="Supplier" href="Products(10)/ODataDemo.FeaturedProduct/Supplier/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Supplier" type="application/atom+xml;type=entry" title="Supplier" href="Products(10)/ODataDemo.FeaturedProduct/Supplier" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/ProductDetail" type="application/xml" title="ProductDetail" href="Products(10)/ODataDemo.FeaturedProduct/ProductDetail/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/ProductDetail" type="application/atom+xml;type=entry" title="ProductDetail" href="Products(10)/ODataDemo.FeaturedProduct/ProductDetail" /><link rel="http://docs.oasis-open.org/odata/ns/relatedlinks/Advertisement" type="application/xml" title="Advertisement" href="Products(10)/ODataDemo.FeaturedProduct/Advertisement/$ref" /><link rel="http://docs.oasis-open.org/odata/ns/related/Advertisement" type="application/atom+xml;type=entry" title="Advertisement" href="Products(10)/ODataDemo.FeaturedProduct/Advertisement" /><title /><updated>2018-02-02T09:41:22Z</updated><author><name /></author><content type="application/xml"><m:properties><d:ID m:type="Int32">10</d:ID><d:Name>Coffee</d:Name><d:Description>Bulk size can of instant coffee</d:Description><d:ReleaseDate m:type="DateTimeOffset">1982-12-31T00:00:00Z</d:ReleaseDate><d:DiscontinuedDate m:null="true" /><d:Rating m:type="Int16">1</d:Rating><d:Price m:type="Double">6.99</d:Price></m:properties></content></entry></feed>'


		res.setHeader('Content-type', 'application/atom+xml')

		res.end(data)
	catch e
		console.error e.stack
		JsonRoutes.sendResult res,
			code: 200
			data: { errors: [{errorMessage: e.message}] }

JsonRoutes.add 'get', '/odata/v4/data', (req, res, next) ->
	console.log "/odata/v4/data"
	try
		data = { "status": "success", "value": [ { "_id": "EsNs8svkxiSZ9qPyk", "archival_category_code": "WS", "aggregation_level": "文件", "title": "股份公司发文2018年投资计划", "author": "李明朗", "document_date": "2018-01-17T16:00:00.000Z", "security_classification": "公开", "produce_flag": "在档", "year": "2018", "document_aggregation": "单件", "document_status": "不归档", "language": "汉语", "orignal_document_creation_way": "原生", "agent_type": "部门", "space": "n9eLY4aFpnvGroHy6", "is_received": false, "is_destroyed": false, "is_borrowed": false, "created": "2018-01-24T06:06:37.983Z", "created_by": "5194c66ef4a563537a000003", "owner": "5194c66ef4a563537a000003", "category_code": "nA4rmCd7gCnRgJtLT", "retention_peroid": "keAjp89Q5Bac67W9d", "destroy_date": "2118-01-17T16:00:00.000Z" }, { "_id": "EsNs8svkxiSZ9qPyk222", "archival_category_code": "WS", "aggregation_level": "文件", "title": "股份公司发文", "author": "李明朗", "document_date": "2018-01-17T16:00:00.000Z", "security_classification": "公开", "produce_flag": "在档", "year": "2011", "document_aggregation": "单件", "document_status": "不归档", "language": "汉语", "orignal_document_creation_way": "原生", "agent_type": "部门", "space": "n9eLY4aFpnvGroHy6", "is_received": false, "is_destroyed": false, "is_borrowed": false, "created": "2018-01-24T06:06:37.983Z", "created_by": "5194c66ef4a563537a000003", "owner": "5194c66ef4a563537a000003", "category_code": "nA4rmCd7gCnRgJtLT", "retention_peroid": "keAjp89Q5Bac67W9d", "destroy_date": "2118-01-17T16:00:00.000Z" }, { "_id": "EsNs8svkxiS11Z9qPyk", "archival_category_code": "WS", "aggregation_level": "文件", "title": "股份公司发文zx2018年投资计划", "author": "李明朗", "document_date": "2018-01-17T16:00:00.000Z", "security_classification": "公开", "produce_flag": "在档", "year": "2012", "document_aggregation": "单件", "document_status": "不归档", "language": "汉语", "orignal_document_creation_way": "原生", "agent_type": "部门", "space": "n9eLY4aFpnvGroHy6", "is_received": false, "is_destroyed": false, "is_borrowed": false, "created": "2018-01-24T06:06:37.983Z", "created_by": "5194c66ef4a563537a000003", "owner": "5194c66ef4a563537a000003", "category_code": "nA4rmCd7gCnRgJtLT", "retention_peroid": "keAjp89Q5Bac67W9d", "destroy_date": "2118-01-17T16:00:00.000Z" }, { "_id": "EsNs212128svkxiSZ9qPyk", "archival_category_code": "WS", "aggregation_level": "文件", "title": "股份公司发文21212018年投资计划", "author": "李明朗", "document_date": "2018-01-17T16:00:00.000Z", "security_classification": "公开", "produce_flag": "在档", "year": "2013", "document_aggregation": "单件", "document_status": "不归档", "language": "汉语", "orignal_document_creation_way": "原生", "agent_type": "部门", "space": "n9eLY4aFpnvGroHy6", "is_received": false, "is_destroyed": false, "is_borrowed": false, "created": "2018-01-24T06:06:37.983Z", "created_by": "5194c66ef4a563537a000003", "owner": "5194c66ef4a563537a000003", "category_code": "nA4rmCd7gCnRgJtLT", "retention_peroid": "keAjp89Q5Bac67W9d", "destroy_date": "2118-01-17T16:00:00.000Z" }, { "_id": "EsN3456s8svkxiSZ9qP3456yk", "archival_category_code": "WS", "aggregation_level": "文件", "title": "股份公司sdvgazsdf资计划", "author": "李明朗", "document_date": "2018-01-17T16:00:00.000Z", "security_classification": "公开", "produce_flag": "在档", "year": "2014", "document_aggregation": "单件", "document_status": "不归档", "language": "汉语", "orignal_document_creation_way": "原生", "agent_type": "部门", "space": "n9eLY4aFpnvGroHy6", "is_received": false, "is_destroyed": false, "is_borrowed": false, "created": "2018-01-24T06:06:37.983Z", "created_by": "5194c66ef4a563537a000003", "owner": "5194c66ef4a563537a000003", "category_code": "nA4rmCd7gCnRgJtLT", "retention_peroid": "keAjp89Q5Bac67W9d", "destroy_date": "2118-01-17T16:00:00.000Z" }, { "_id": "EsN234asdfs8svkxiSZ9qPyk", "archival_category_code": "WS", "aggregation_level": "文件", "title": "股份公司asdfasdfzxcv资计划", "author": "李明朗", "document_date": "2018-01-17T16:00:00.000Z", "security_classification": "公开", "produce_flag": "在档", "year": "2015", "document_aggregation": "单件", "document_status": "不归档", "language": "汉语", "orignal_document_creation_way": "原生", "agent_type": "部门", "space": "n9eLY4aFpnvGroHy6", "is_received": false, "is_destroyed": false, "is_borrowed": false, "created": "2018-01-24T06:06:37.983Z", "created_by": "5194c66ef4a563537a000003", "owner": "5194c66ef4a563537a000003", "category_code": "nA4rmCd7gCnRgJtLT", "retention_peroid": "keAjp89Q5Bac67W9d", "destroy_date": "2118-01-17T16:00:00.000Z" }, { "_id": "E12121212sNs8svkxiSZ9qPyk", "archival_category_code": "WS", "aggregation_level": "文件", "title": "股份公司发bbbbbb资计划股份公司发bbbbbb资计划股份公司发bbbbbb资计划股份公司发bbbbbb资计划股份公司发bbbbbb资计划股份公司发bbbbbb资计划", "author": "李明朗", "document_date": "2018-01-17T16:00:00.000Z", "security_classification": "公开", "produce_flag": "在档", "year": "2016", "document_aggregation": "单件", "document_status": "不归档", "language": "汉语", "orignal_document_creation_way": "原生", "agent_type": "部门", "space": "n9eLY4aFpnvGroHy6", "is_received": false, "is_destroyed": false, "is_borrowed": false, "created": "2018-01-24T06:06:37.983Z", "created_by": "5194c66ef4a563537a000003", "owner": "5194c66ef4a563537a000003", "category_code": "nA4rmCd7gCnRgJtLT", "retention_peroid": "keAjp89Q5Bac67W9d", "destroy_date": "2118-01-17T16:00:00.000Z" } ], "@odata.count": 7, "@odata.context": "http://services.odata.org/V4/OData/OData.svc/$metadata#Products" }

		res.setHeader('Content-type', 'application/json;odata.metadata=minimal;charset=utf-8');
		res.setHeader('OData-Version', '4.0')
		JsonRoutes.sendResult res,
			code: 200
			data: data
	catch e
		console.error e.stack
		JsonRoutes.sendResult res,
			code: 200
			data: { errors: [{errorMessage: e.message}] }
